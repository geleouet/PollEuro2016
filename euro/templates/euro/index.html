{% extends 'euro/base.html' %} 
{% load static %}
{% load extra_euro %}
{% block content %} 
{% if tag_list %} 

<div class="panel-group" id="accordionTag">
{% for ctag in tag_list %}


    <div class="panel panel-default">
        <div class="panel-heading">
            <h4 class="panel-title">
        <a data-toggle="collapse" href="#collapse{{forloop.counter}}" data-parent="#accordionTag"><span class="date-match">{{ctag.name}}</span></a>
      </h4>
        </div>
        <div id="collapse{{forloop.counter}}" class="panel-collapse collapse {% if forloop.first %}in{% endif %}">
            <div class="panel-body">
                {% for rencontre in ctag.matchs %}
                        <script type="text/javascript">
                            formSave.fields['score_{{rencontre.id}}_1']= "score_{{rencontre.id}}_1"
                            formSave.fields['score_{{rencontre.id}}_2']= "score_{{rencontre.id}}_2"
                        </script>
                <div class="well well">
                    
                    {% if rencontre.passed %}    
                    <span class="date-match"><i>{{rencontre.date}}</i></span>
                    {% endif %}
                    
                    
                    <img src="{% static 'euro/flags/' %}{{rencontre.pays1.icone}}.png" alt="{{rencontre.pays1}}" />
                    {% if rencontre.result.winner == 1 %}
                    <img src="{% static 'euro/images/victoire.png' %}" alt="Euro 2016" height="32" />
                    {% endif %}
                    <span class='pays'>{{rencontre.pays1}}</span>
                    
                    {% if username %}
                    
                    {% if rencontre.allowNull == False %}{% if rencontre.passed == False%}
                    <label>
                            <input class="entry" id = 'score_{{rencontre.id}}_radio_1' type="radio" name="score_{{rencontre.id}}_radio" value="1"/>
                            <img src="{% static 'euro/images/victoire.png' %}" alt="Euro 2016" height="32" />
                    </label>
                    {% else %}
                        {% if pronostics|winner:rencontre == 1 %}<img class="gray" src="{% static 'euro/images/victoire.png' %}" alt="Euro 2016" height="32" />{% endif %}
                    {% endif %}
                    {% endif %}
                    
                    <input class="score entry" type="number" id="score_{{rencontre.id}}_1" min="0" value="{{pronostics|score1:rencontre}}" {% if rencontre.passed %}disabled{% endif %}/>
                    {% endif %}
                    
                    {% if rencontre.passed %}    
                        <span style="padding: 10px;"><big><strong>{{rencontre.result.score1}} - {{rencontre.result.score2}}</strong></big></span>
                    {% else %}
                        <span class="date-match">{{rencontre.date}}</span>
                    {% endif %}
                    
                    
                    {% if username %}
                    <input class="score entry" type="number" id="score_{{rencontre.id}}_2" min="0" value="{{pronostics|score2:rencontre}}" {% if rencontre.passed %}disabled{% endif %}/>
                    
                    {% if rencontre.allowNull == False %}{% if rencontre.passed == False%}
                    <label>
                            <input class="entry" id = 'score_{{rencontre.id}}_radio_2' type="radio" name="score_{{rencontre.id}}_radio" value="2"/>
                            <img src="{% static 'euro/images/victoire.png' %}" alt="Euro 2016" height="32" />
                    </label>
                    {% else %}
                        {% if pronostics|winner:rencontre == 2 %}<img class="gray" src="{% static 'euro/images/victoire.png' %}" alt="Euro 2016" height="32" />{% endif %}
                    {% endif %}
                    
                    {% endif %}
                    
                    <script type="text/javascript">
                        var winf = function () {
                                if ($('#score_{{rencontre.id}}_1').val() > $('#score_{{rencontre.id}}_2').val()) {
                                    $('#score_{{rencontre.id}}_radio_1').prop("checked", true)
                                }
                                if ($('#score_{{rencontre.id}}_1').val() < $('#score_{{rencontre.id}}_2').val()) {
                                    $('#score_{{rencontre.id}}_radio_2').prop("checked", true)
                                }
        
                        }
                        $('#score_{{rencontre.id}}_1').on('change', winf);
                        $('#score_{{rencontre.id}}_2').on('change', winf);
                    </script>
                    
                    {% endif %}
                    
                    <span class='pays' style='text-align:right;'>{{rencontre.pays2}}</span>
                    {% if rencontre.result.winner == 2 %}
                    <img src="{% static 'euro/images/victoire.png' %}" alt="Euro 2016" height="32" />
                    {% endif %}
                    <img src="{% static 'euro/flags/' %}{{rencontre.pays2.icone}}.png" alt="{{rencontre.pays2}}" /> &nbsp;
                    
                    {% if rencontre.passed %}    
                    {% for pron in pronostics %}
                        {% if pron.match == rencontre %}
                        {% for i in pron.points|get_range %}
                        <img src="{% static 'euro/images/star.png' %}" alt="Euro 2016" height="32" />
                        {% endfor %}
                        {% endif %}
                    {% endfor %}
                    
                    {% endif %}
                    
                </div>

                {% endfor %}
            </div>
        </div>
    </div>

{% endfor %}
</div>
{% else %}
<p>No polls are available.</p>
{% endif %} {% endblock content %}